<?php
/**
{% for line in header %}
 * {{ line }}
{% endfor %}
 */
{% if strict %}
declare(strict_types=1);
{% endif %}
{% if namespace %}

namespace {{ namespace }};
{% endif %}

use Railt\Compiler\Lexer\NativeStateful as {{ class }}Runtime;

/**
 * This class has been auto-generated by the {{ self }}
 */
final class {{ class }} extends {{ class }}Runtime
{
    /**#@+
     * List of {{ class }}::class tokens defined as public constants
     */
    {% for k, def in tokens %}
public const {{ k }} = {{ k | string | raw }};
    {% endfor %}
/**#@-*/

    /**
     * {{ class }} constructor must be redefined to
     * correctly reproduce the basic implementation.
     */
    final public function __construct()
    {
        parent::__construct({{ pattern | string | raw }}, {{ skip | array | replace({"\n":""," ":""}) | raw }});
    }

    /**
     * Returns the lexer compilation date and time in RFC3339 format
     *
     * @return string
     */
    public function getBuiltDate(): string
    {
        return {{ "now" | date("Y-m-d\\TH:i:s.vP") | string | raw }};
    }
}
